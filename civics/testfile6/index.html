<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>JLPT Kanji Drag & Drop Drill</title>
<style>
body { font-family: -apple-system, BlinkMacSystemFont, sans-serif; margin: 0; padding: 12px; }
.hidden { display: none; }
h2 { margin-top: 0; }
.level { margin-bottom: 16px; }
.kanji-select { display: flex; flex-wrap: wrap; gap: 6px; }
.kanji-select label { border: 1px solid #ccc; padding: 6px 8px; border-radius: 6px; cursor: pointer; }
button { padding: 10px 16px; font-size: 16px; }
#timer { font-size: 18px; margin-bottom: 10px; }
#kanjiTray, #readingTray {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(64px, 1fr));
  gap: 8px;
}
#kanjiTray { margin-bottom: 24px; }
.tile {
  border: 2px solid #444;
  border-radius: 10px;
  text-align: center;
  padding: 8px;
  user-select: none;
  background: #fff;
}
.kanji-tile { font-size: 28px; cursor: grab; }
.reading-tile { font-size: 18px; min-height: 64px; display: flex; align-items: center; justify-content: center; }
.correct { background: #b6f2c2; border-color: #2a8a44; }
</style>
</head>
<body>

<div id="startScreen">
  <h2>Select Kanji to Drill</h2>
  <div id="levels"></div>
  <button id="startDrill">Start</button>
</div>

<div id="drillScreen" class="hidden">
  <div id="timer">00:00</div>
  <div id="kanjiTray"></div>
  <div id="readingTray"></div>
</div>

<script>
const LEVELS = {
  N5: [
    {k:'一',on:'イチ',kun:'ひと'}, {k:'二',on:'ニ',kun:'ふた'}, {k:'三',on:'サン',kun:'み'}, {k:'四',on:'ヨン',kun:'よん'}, {k:'五',on:'ゴ',kun:'いつ'},
    {k:'六',on:'ロク',kun:'む'}, {k:'七',on:'ナナ',kun:'なな'}, {k:'八',on:'ハチ',kun:'や'}, {k:'九',on:'キュウ',kun:'ここの'}, {k:'十',on:'ジュウ',kun:'とお'},
    {k:'百',on:'ヒャク',kun:''}, {k:'千',on:'セン',kun:''}, {k:'日',on:'ニチ',kun:'ひ'}, {k:'月',on:'ゲツ',kun:'つき'}, {k:'火',on:'カ',kun:'ひ'},
    {k:'水',on:'スイ',kun:'みず'}, {k:'木',on:'モク',kun:'き'}, {k:'金',on:'キン',kun:'かね'}, {k:'土',on:'ド',kun:'つち'}, {k:'人',on:'ジン',kun:'ひと'},
    {k:'年',on:'ネン',kun:'とし'}, {k:'時',on:'ジ',kun:'とき'}, {k:'分',on:'フン',kun:'わ'}, {k:'今',on:'コン',kun:'いま'}, {k:'大',on:'ダイ',kun:'おお'},
    {k:'小',on:'ショウ',kun:'ちい'}, {k:'中',on:'チュウ',kun:'なか'}, {k:'上',on:'ジョウ',kun:'うえ'}, {k:'下',on:'カ',kun:'した'}, {k:'左',on:'サ',kun:'ひだり'},
    {k:'右',on:'ウ',kun:'みぎ'}, {k:'前',on:'ゼン',kun:'まえ'}, {k:'後',on:'ゴ',kun:'あと'}, {k:'山',on:'サン',kun:'やま'}, {k:'川',on:'セン',kun:'かわ'},
    {k:'田',on:'デン',kun:'た'}, {k:'口',on:'コウ',kun:'くち'}, {k:'目',on:'モク',kun:'め'}, {k:'耳',on:'ジ',kun:'みみ'}, {k:'手',on:'シュ',kun:'て'},
    {k:'足',on:'ソク',kun:'あし'}, {k:'力',on:'リョク',kun:'ちから'}, {k:'男',on:'ダン',kun:'おとこ'}, {k:'女',on:'ジョ',kun:'おんな'}, {k:'子',on:'シ',kun:'こ'},
    {k:'学',on:'ガク',kun:'まな'}, {k:'校',on:'コウ',kun:''}, {k:'先',on:'セン',kun:'さき'}, {k:'生',on:'セイ',kun:'いきる'}, {k:'友',on:'ユウ',kun:'とも'},
    {k:'本',on:'ホン',kun:'もと'}, {k:'行',on:'コウ',kun:'いく'}, {k:'来',on:'ライ',kun:'くる'}, {k:'帰',on:'キ',kun:'かえる'}, {k:'見',on:'ケン',kun:'みる'},
    {k:'聞',on:'ブン',kun:'きく'}, {k:'話',on:'ワ',kun:'はなす'}, {k:'読',on:'ドク',kun:'よむ'}, {k:'書',on:'ショ',kun:'かく'}, {k:'食',on:'ショク',kun:'たべる'},
    {k:'飲',on:'イン',kun:'のむ'}, {k:'買',on:'バイ',kun:'かう'}, {k:'出',on:'シュツ',kun:'でる'}, {k:'入',on:'ニュウ',kun:'はいる'}, {k:'休',on:'キュウ',kun:'やすむ'},
    {k:'何',on:'カ',kun:'なに'}
  ],

  N4: [
    {k:'会',on:'カイ',kun:'あう'}, {k:'社',on:'シャ',kun:''}, {k:'店',on:'テン',kun:'みせ'}, {k:'駅',on:'エキ',kun:''}, {k:'病',on:'ビョウ',kun:'やまい'},
    {k:'院',on:'イン',kun:''}, {k:'仕',on:'シ',kun:''}, {k:'事',on:'ジ',kun:'こと'}, {k:'働',on:'ドウ',kun:'はたらく'}, {k:'思',on:'シ',kun:'おもう'},
    {k:'考',on:'コウ',kun:'かんがえる'}, {k:'作',on:'サク',kun:'つくる'}, {k:'使',on:'シ',kun:'つかう'}, {k:'借',on:'シャク',kun:'かりる'}, {k:'貸',on:'タイ',kun:'かす'},
    {k:'住',on:'ジュウ',kun:'すむ'}, {k:'知',on:'チ',kun:'しる'}, {k:'待',on:'タイ',kun:'まつ'}, {k:'持',on:'ジ',kun:'もつ'}, {k:'教',on:'キョウ',kun:'おしえる'},
    {k:'習',on:'シュウ',kun:'ならう'}, {k:'強',on:'キョウ',kun:'つよい'}, {k:'弱',on:'ジャク',kun:'よわい'}, {k:'早',on:'ソウ',kun:'はやい'}, {k:'速',on:'ソク',kun:'はやい'},
    {k:'近',on:'キン',kun:'ちかい'}, {k:'遠',on:'エン',kun:'とおい'}, {k:'重',on:'ジュウ',kun:'おもい'}, {k:'軽',on:'ケイ',kun:'かるい'}, {k:'広',on:'コウ',kun:'ひろい'},
    {k:'狭',on:'キョウ',kun:'せまい'}, {k:'暗',on:'アン',kun:'くらい'}, {k:'明',on:'メイ',kun:'あかるい'}, {k:'立',on:'リツ',kun:'たつ'}, {k:'歩',on:'ホ',kun:'あるく'},
    {k:'走',on:'ソウ',kun:'はしる'}, {k:'止',on:'シ',kun:'とまる'}, {k:'起',on:'キ',kun:'おきる'}, {k:'寝',on:'シン',kun:'ねる'}, {k:'洗',on:'セン',kun:'あらう'},
    {k:'売',on:'バイ',kun:'うる'}, {k:'送',on:'ソウ',kun:'おくる'}, {k:'通',on:'ツウ',kun:'とおる'}, {k:'始',on:'シ',kun:'はじめる'}, {k:'終',on:'シュウ',kun:'おわる'},
    {k:'開',on:'カイ',kun:'ひらく'}, {k:'閉',on:'ヘイ',kun:'しめる'}, {k:'答',on:'トウ',kun:'こたえる'}, {k:'問',on:'モン',kun:'とい'}, {k:'困',on:'コン',kun:'こまる'},
    {k:'急',on:'キュウ',kun:'いそぐ'}, {k:'少',on:'ショウ',kun:'すくない'}, {k:'多',on:'タ',kun:'おおい'}, {k:'悪',on:'アク',kun:'わるい'}, {k:'正',on:'セイ',kun:'ただしい'},
    {k:'同',on:'ドウ',kun:'おなじ'}, {k:'別',on:'ベツ',kun:'わかれる'}, {k:'新',on:'シン',kun:'あたらしい'}, {k:'古',on:'コ',kun:'ふるい'}, {k:'楽',on:'ガク',kun:'たのしい'},
    {k:'暑',on:'ショ',kun:'あつい'}, {k:'寒',on:'カン',kun:'さむい'}, {k:'白',on:'ハク',kun:'しろ'}, {k:'黒',on:'コク',kun:'くろ'}, {k:'青',on:'セイ',kun:'あお'},
    {k:'赤',on:'セキ',kun:'あか'}, {k:'空',on:'クウ',kun:'そら'}, {k:'海',on:'カイ',kun:'うみ'}, {k:'風',on:'フウ',kun:'かぜ'}, {k:'雨',on:'ウ',kun:'あめ'},
    {k:'電',on:'デン',kun:''}, {k:'車',on:'シャ',kun:'くるま'}, {k:'国',on:'コク',kun:'くに'}, {k:'都',on:'ト',kun:'みやこ'}, {k:'道',on:'ドウ',kun:'みち'},
    {k:'町',on:'チョウ',kun:'まち'}, {k:'村',on:'ソン',kun:'むら'}, {k:'肉',on:'ニク',kun:''}, {k:'魚',on:'ギョ',kun:'さかな'}, {k:'牛',on:'ギュウ',kun:'うし'},
    {k:'豚',on:'トン',kun:'ぶた'}, {k:'米',on:'ベイ',kun:'こめ'}, {k:'野',on:'ヤ',kun:'の'}, {k:'菜',on:'サイ',kun:'な'}, {k:'茶',on:'チャ',kun:''},
    {k:'酒',on:'シュ',kun:'さけ'}, {k:'英',on:'エイ',kun:''}, {k:'医',on:'イ',kun:''}, {k:'者',on:'シャ',kun:'もの'}, {k:'主',on:'シュ',kun:'ぬし'},
    {k:'族',on:'ゾク',kun:''}, {k:'親',on:'シン',kun:'おや'}, {k:'兄',on:'ケイ',kun:'あに'}, {k:'姉',on:'シ',kun:'あね'}, {k:'弟',on:'テイ',kun:'おとうと'},
    {k:'妹',on:'マイ',kun:'いもうと'}, {k:'室',on:'シツ',kun:''}, {k:'屋',on:'オク',kun:'や'}, {k:'家',on:'カ',kun:'いえ'}, {k:'建',on:'ケン',kun:'たてる'},
    {k:'物',on:'ブツ',kun:'もの'}, {k:'所',on:'ショ',kun:'ところ'}, {k:'場',on:'ジョウ',kun:'ば'}, {k:'方',on:'ホウ',kun:'かた'}, {k:'意',on:'イ',kun:''},
    {k:'味',on:'ミ',kun:'あじ'}
  ],

  N3: [
    {k:'政',on:'セイ',kun:''}, {k:'治',on:'ジ',kun:'おさめる'}, {k:'経',on:'ケイ',kun:''}, {k:'済',on:'サイ',kun:''}, {k:'法',on:'ホウ',kun:''},
    {k:'律',on:'リツ',kun:''}, {k:'議',on:'ギ',kun:''}, {k:'員',on:'イン',kun:''}, {k:'選',on:'セン',kun:'えらぶ'}, {k:'挙',on:'キョ',kun:'あげる'},
    {k:'権',on:'ケン',kun:''}, {k:'義',on:'ギ',kun:''}, {k:'情',on:'ジョウ',kun:''}, {k:'報',on:'ホウ',kun:''}, {k:'想',on:'ソウ',kun:''},
    {k:'感',on:'カン',kun:''}, {k:'覚',on:'カク',kun:'おぼえる'}, {k:'忘',on:'ボウ',kun:'わすれる'}, {k:'決',on:'ケツ',kun:'きめる'}, {k:'定',on:'テイ',kun:'さだめる'},
    {k:'増',on:'ゾウ',kun:'ふえる'}, {k:'減',on:'ゲン',kun:'へる'}, {k:'変',on:'ヘン',kun:'かわる'}, {k:'化',on:'カ',kun:''}, {k:'続',on:'ゾク',kun:'つづく'},
    {k:'達',on:'タツ',kun:''}, {k:'対',on:'タイ',kun:''}, {k:'関',on:'カン',kun:'かかわる'}, {k:'係',on:'ケイ',kun:'かかり'}, {k:'比',on:'ヒ',kun:'くらべる'},
    {k:'合',on:'ゴウ',kun:'あう'}, {k:'違',on:'イ',kun:'ちがう'}, {k:'反',on:'ハン',kun:''}, {k:'賛',on:'サン',kun:''}, {k:'質',on:'シツ',kun:''},
    {k:'量',on:'リョウ',kun:''}, {k:'価',on:'カ',kun:''}, {k:'格',on:'カク',kun:''}, {k:'費',on:'ヒ',kun:''}, {k:'資',on:'シ',kun:''},
    {k:'源',on:'ゲン',kun:''}, {k:'税',on:'ゼイ',kun:''}, {k:'設',on:'セツ',kun:''}, {k:'備',on:'ビ',kun:'そなえる'}, {k:'整',on:'セイ',kun:'ととのえる'},
    {k:'管',on:'カン',kun:''}, {k:'営',on:'エイ',kun:''}, {k:'務',on:'ム',kun:'つとめる'}, {k:'職',on:'ショク',kun:''}, {k:'任',on:'ニン',kun:'まかせる'},
    {k:'技',on:'ギ',kun:'わざ'}, {k:'術',on:'ジュツ',kun:''}, {k:'能',on:'ノウ',kun:''}, {k:'機',on:'キ',kun:'はた'}, {k:'器',on:'キ',kun:'うつわ'},
    {k:'材',on:'ザイ',kun:''}, {k:'料',on:'リョウ',kun:''}, {k:'製',on:'セイ',kun:''}, {k:'限',on:'ゲン',kun:'かぎる'}, {k:'程',on:'テイ',kun:'ほど'},
    {k:'率',on:'リツ',kun:''}, {k:'例',on:'レイ',kun:'たとえ'}, {k:'況',on:'キョウ',kun:''}, {k:'段',on:'ダン',kun:''}, {k:'論',on:'ロン',kun:''},
    {k:'説',on:'セツ',kun:''}, {k:'談',on:'ダン',kun:''}, {k:'題',on:'ダイ',kun:''}, {k:'表',on:'ヒョウ',kun:'あらわす'}, {k:'現',on:'ゲン',kun:'あらわれる'},
    {k:'示',on:'ジ',kun:'しめす'}, {k:'伝',on:'デン',kun:'つたえる'}, {k:'調',on:'チョウ',kun:'しらべる'}, {k:'査',on:'サ',kun:''}, {k:'認',on:'ニン',kun:'みとめる'},
    {k:'確',on:'カク',kun:'たしか'}, {k:'判',on:'ハン',kun:''}, {k:'断',on:'ダン',kun:'ことわる'}, {k:'可',on:'カ',kun:''}, {k:'否',on:'ヒ',kun:''},
    {k:'危',on:'キ',kun:'あぶない'}, {k:'険',on:'ケン',kun:''}, {k:'守',on:'シュ',kun:'まもる'}, {k:'護',on:'ゴ',kun:''}, {k:'犯',on:'ハン',kun:''},
    {k:'罪',on:'ザイ',kun:'つみ'}, {k:'罰',on:'バツ',kun:''}, {k:'許',on:'キョ',kun:'ゆるす'}, {k:'環',on:'カン',kun:''}, {k:'境',on:'キョウ',kun:''},
    {k:'保',on:'ホ',kun:'たもつ'}, {k:'存',on:'ソン',kun:''}, {k:'維',on:'イ',kun:''}, {k:'歴',on:'レキ',kun:''}, {k:'史',on:'シ',kun:''},
    {k:'紀',on:'キ',kun:''}, {k:'代',on:'ダイ',kun:'かえる'}, {k:'昔',on:'セキ',kun:'むかし'}, {k:'将',on:'ショウ',kun:''}, {k:'過',on:'カ',kun:'すぎる'},
    {k:'在',on:'ザイ',kun:''}, {k:'属',on:'ゾク',kun:''}, {k:'個',on:'コ',kun:''}, {k:'各',on:'カク',kun:'おのおの'}, {k:'全',on:'ゼン',kun:'すべて'},
    {k:'部',on:'ブ',kun:''}, {k:'常',on:'ジョウ',kun:'つね'}, {k:'非',on:'ヒ',kun:''}, {k:'必',on:'ヒツ',kun:'かならず'}, {k:'要',on:'ヨウ',kun:'いる'},
    {k:'適',on:'テキ',kun:''}, {k:'余',on:'ヨ',kun:'あまる'}, {k:'未',on:'ミ',kun:''}
  ]
};

const levelsDiv = document.getElementById('levels');
for (const lvl in LEVELS) {
  const div = document.createElement('div');
  div.className = 'level';
  div.innerHTML = `<h3>${lvl}</h3><div class="kanji-select">` +
    LEVELS[lvl].map((k,i)=>`<label><input type="checkbox" data-level="${lvl}" data-index="${i}"> ${k.k}</label>`).join('') +
    '</div>';
  levelsDiv.appendChild(div);
}

let timerInt, seconds = 0;
function startTimer(){ clearInterval(timerInt); seconds=0; timerInt=setInterval(()=>{seconds++;document.getElementById('timer').textContent=`${String(Math.floor(seconds/60)).padStart(2,'0')}:${String(seconds%60).padStart(2,'0')}`},1000)}

function beginDrill(){
  const checked = document.querySelectorAll('input[type=checkbox]:checked');
  if (!checked.length) return;
  const selected = [...checked].map(c=>LEVELS[c.dataset.level][c.dataset.index]);
  document.getElementById('startScreen').classList.add('hidden');
  document.getElementById('drillScreen').classList.remove('hidden');
  startTimer();

  const kanjiTray = document.getElementById('kanjiTray');
  const readingTray = document.getElementById('readingTray');
  kanjiTray.innerHTML = '';
  readingTray.innerHTML = '';

  const shuffledReadings = [...selected].sort(()=>Math.random()-0.5);

  selected.forEach(k=>{
    const t=document.createElement('div');
    t.className='tile kanji-tile';
    t.textContent=k.k;
    t.draggable=true;
    t.ondragstart=e=>e.dataTransfer.setData('text',k.k);
    kanjiTray.appendChild(t);
  });

  shuffledReadings.forEach(k=>{
    const t=document.createElement('div');
    t.className='tile reading-tile';
    t.dataset.kanji=k.k;
    t.textContent=[k.on,k.kun].filter(Boolean).join(', ');
    t.ondragover=e=>e.preventDefault();
    t.ondrop=e=>{
      e.preventDefault();
      const d=e.dataTransfer.getData('text');
      if(d===k.k){ t.classList.add('correct'); t.textContent=d; }
    };
    readingTray.appendChild(t);
  });
}

document.getElementById('startDrill').onclick = beginDrill;
</script>
</body>
</html>
