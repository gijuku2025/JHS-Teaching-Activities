<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Climate Quiz</title>

<style>
  body {
    font-family: Arial, sans-serif;
    background: #f5f7fa;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
    margin: 0;
  }

  .container {
    background: #fff;
    width: 420px;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 10px 25px rgba(0,0,0,0.1);
    text-align: center;
  }

  h1 {
    margin-top: 0;
  }

  .choice-btn {
    width: 100%;
    border: none;
    border-radius: 8px;
    margin: 8px 0;
    cursor: pointer;
  }

  .hidden {
    display: none;
  }

  #progress-bar {
    height: 8px;
    background: #ddd;
    border-radius: 4px;
    overflow: hidden;
    margin-bottom: 10px;
  }

  #progress-fill {
    height: 100%;
    width: 0%;
    background: #4CAF50;
    transition: width 0.3s;
  }

  #feedback {
    margin-top: 10px;
    font-weight: bold;
  }
</style>
</head>

<body>

<div class="container">

  <!-- START SCREEN -->
  <div id="start-screen">
    <h1>Climate Quiz</h1>
    <button onclick="startQuiz()">Start Quiz</button>
  </div>

  <!-- QUIZ SCREEN -->
  <div id="quiz-screen" class="hidden">
    <div id="progress-bar">
      <div id="progress-fill"></div>
    </div>

    <div id="question-counter"></div>
    <h2 id="question-text"></h2>
    <div id="choices"></div>
    <div id="feedback"></div>
  </div>

  <!-- END SCREEN -->
  <div id="end-screen" class="hidden">
    <h2>Quiz Finished</h2>
    <p id="score-text"></p>
    <p id="time-text"></p>
    <button onclick="location.reload()">Play Again</button>
  </div>

</div>

<script>
/* =====================
   DATA
===================== */

const sentences = [
  {
    en: "Climates in the Temperate Zone have four seasons: Spring, Summer, Autumn, Winter.",
    jp: "温帯気候には春、夏、秋、冬の四季があります。",
    enAudio: "audio/01_climates_in_the_temperate_zone_en.mp3",
    jpAudio: "audio/01_climates_in_the_temperate_zone_jp.mp3"
  },
  {
    en: 'Mild means "Not too much, not too little. Not too hot, not too cold."',
    jp: "穏やかとは「多すぎず、少なすぎず。暑すぎず、寒すぎず」という意味です。",
    enAudio: "audio/02_mild_means_not_too_much_not_to_en.mp3",
    jpAudio: "audio/02_mild_means_not_too_much_not_to_jp.mp3"
  },
  {
    en: "Do you remember what climate is? Climate is Polar, Tropical, Temperate, and Arid.",
    jp: "気候について覚えていますか？気候には寒帯、熱帯、温帯、乾燥帯があります。",
    enAudio: "audio/03_do_you_remember_what_climate_i_en.mp3",
    jpAudio: "audio/03_do_you_remember_what_climate_i_jp.mp3"
  },
  {
    en: "Temperature and rainfall are mostly mild.",
    jp: "気温と降水量は主に穏やかです。",
    enAudio: "audio/04_temperature_and_rainfall_are_m_en.mp3",
    jpAudio: "audio/04_temperature_and_rainfall_are_m_jp.mp3"
  },
  {
    en: "Some Temperate Climates have very hot summers.",
    jp: "ある温帯気候では夏が非常に暑くなります。",
    enAudio: "audio/05_some_temperate_climates_have_v_en.mp3",
    jpAudio: "audio/05_some_temperate_climates_have_v_jp.mp3"
  },
  {
    en: "Some Temperate Climates have very cold winters.",
    jp: "ある温帯気候では冬が非常に寒くなります。",
    enAudio: "audio/06_some_temperate_climates_have_v_en.mp3",
    jpAudio: "audio/06_some_temperate_climates_have_v_jp.mp3"
  },
  {
    en: "Some Temperate Climates have very dry summers.",
    jp: "ある温帯気候では夏が非常に乾燥します。",
    enAudio: "audio/07_some_temperate_climates_have_v_en.mp3",
    jpAudio: "audio/07_some_temperate_climates_have_v_jp.mp3"
  },
  {
    en: "Some Temperate Climates have very dry winters.",
    jp: "ある温帯気候では冬が非常に乾燥します。",
    enAudio: "audio/08_some_temperate_climates_have_v_en.mp3",
    jpAudio: "audio/08_some_temperate_climates_have_v_jp.mp3"
  },
  {
    en: "Oceanic Climates have mild summers and mild winters.",
    jp: "海洋性気候は、夏も冬も穏やかです。",
    enAudio: "audio/09_oceanic_climates_have_mild_sum_en.mp3",
    jpAudio: "audio/09_oceanic_climates_have_mild_sum_jp.mp3"
  },
  {
    en: "Mediterranean Climates are dry in summer with mild rainfall in winter. Summers are hot and winters are mild.",
    jp: "地中海性気候は、夏は乾燥していて冬は穏やかな雨があります。夏は暑く、冬は穏やかです。",
    enAudio: "audio/10_mediterranean_climates_are_dry_en.mp3",
    jpAudio: "audio/10_mediterranean_climates_are_dry_jp.mp3"
  },
  {
    en: "New Zealand has an Oceanic Climate. Wellington is the capital city of New Zealand.",
    jp: "ニュージーランドは海洋性気候です。ウェリントンはニュージーランドの首都です。",
    enAudio: "audio/11_new_zealand_has_an_oceanic_cli_en.mp3",
    jpAudio: "audio/11_new_zealand_has_an_oceanic_cli_jp.mp3"
  },
  {
    en: "Wellington is in the Temperate Zone. It has an Oceanic Climate. There is mild rain all year. Summer and winter are both mild.",
    jp: "ウェリントンは温帯気候に属しています。その気候は海洋性気候で、一年中雨が穏やかに降ります。夏も冬も穏やかです。",
    enAudio: "audio/12_wellington_is_in_the_temperate_en.mp3",
    jpAudio: "audio/12_wellington_is_in_the_temperate_jp.mp3"
  },
  {
    en: "Italy has a Mediterranean Climate. Rome is the capital city of Italy.",
    jp: "イタリアは地中海性気候です。ローマはイタリアの首都です。",
    enAudio: "audio/13_italy_has_a_mediterranean_clim_en.mp3",
    jpAudio: "audio/13_italy_has_a_mediterranean_clim_jp.mp3"
  },
  {
    en: "Traditional Italian families spent a long time eating lunch together.",
    jp: "伝統的なイタリアの家族は、長い時間を過ごしながら昼食を一緒に食べます。",
    enAudio: "audio/14_traditional_italian_families_s_en.mp3",
    jpAudio: "audio/14_traditional_italian_families_s_jp.mp3"
  },
  {
    en: "August 15 is an Italian national holiday called Ferragosto.",
    jp: "8月15日はフェラゴストと呼ばれるイタリアの国民の祝日です。",
    enAudio: "audio/15_august_15_is_an_italian_nation_en.mp3",
    jpAudio: "audio/15_august_15_is_an_italian_nation_jp.mp3"
  }
];

/* =====================
   STATE
===================== */

let questions = [];
let currentQuestion = 0;
let score = 0;
let startTime = null;

const startScreen = document.getElementById("start-screen");
const quizScreen = document.getElementById("quiz-screen");
const endScreen = document.getElementById("end-screen");
const questionText = document.getElementById("question-text");
const choicesDiv = document.getElementById("choices");
const feedbackDiv = document.getElementById("feedback");
const scoreText = document.getElementById("score-text");
const timeText = document.getElementById("time-text");
const progressFill = document.getElementById("progress-fill");
const questionCounterDiv = document.getElementById("question-counter");

/* =====================
   FUNCTIONS
===================== */

function shuffle(arr) {
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
}

function startQuiz() {
  startTime = new Date();

  questions = [...sentences];
  shuffle(questions);
  questions = questions.slice(0, 10);

  currentQuestion = 0;
  score = 0;

  startScreen.classList.add("hidden");
  quizScreen.classList.remove("hidden");

  showQuestion();
}

function showQuestion() {
  feedbackDiv.textContent = "";
  choicesDiv.innerHTML = "";

  const q = questions[currentQuestion];
  questionText.textContent = q.en;

  questionCounterDiv.textContent =
    `Question ${currentQuestion + 1} of ${questions.length}`;

  progressFill.style.width =
    ((currentQuestion + 1) / questions.length) * 100 + "%";

  let pool = sentences.map(s => s.jp);
  shuffle(pool);

  let options = pool.slice(0, 3);
  if (!options.includes(q.jp)) {
    options[Math.floor(Math.random() * 3)] = q.jp;
  }

  shuffle(options);

  options.forEach(opt => {
    const btn = document.createElement("button");
    btn.textContent = opt;
    btn.className = "choice-btn";
    btn.onclick = () => checkAnswer(opt);
    choicesDiv.appendChild(btn);
  });
}

function checkAnswer(selected) {
  const correct = questions[currentQuestion].jp;

  if (selected === correct) {
    score++;
    feedbackDiv.textContent = "Correct!";
  } else {
    feedbackDiv.textContent = "Incorrect";
  }

  setTimeout(() => {
    currentQuestion++;
    if (currentQuestion < questions.length) {
      showQuestion();
    } else {
      endQuiz();
    }
  }, 800);
}

function formatDateTime(date) {
  return date.toLocaleString();
}

function endQuiz() {
  quizScreen.classList.add("hidden");
  endScreen.classList.remove("hidden");

  scoreText.textContent = `Score: ${score} / ${questions.length}`;
  timeText.textContent =
    `Quiz started at: ${formatDateTime(startTime)}`;
}
</script>

</body>
</html>
